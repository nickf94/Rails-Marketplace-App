<h1>Your Order</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><%= @product.name %></td>
      <td><%= @product.description %></td>
      <td><%= number_to_currency @product.price %></td>
    </tr>
  </tbody>
</table>

<button class="button is-info is-rounded" id="checkout">Checkout Now</button>

<script src="https://js.stripe.com/v3/"></script>

<script>
  let stripe = Stripe("pk_test_rXGWa2yhClYJ9dJ7o2V8rd9H00Z4NBPYTF");
  function checkout() {
    stripe
      .redirectToCheckout({
        sessionId: "<%= @session.id %>"
      })
      .then(result => alert(result));
  }
  document.querySelector("#checkout").addEventListener("click", checkout)
</script>
